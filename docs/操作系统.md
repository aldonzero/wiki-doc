## 操作系统的特征

***

### 并发

指多个事件交替发生，在宏观上是同时发生的，在微观上是交替发生的。

### 共享

共享是指资源共享，是指系统中的资源可供内存中多个并发执行的进程共同使用

- 互斥共享方式：系统中的某些资源，虽然可以提供给多个进程使用，但一个时间段内只允许一个进程访问该资源。在一段时间内独占资源。
- 同时共享方式：系统中的某些资源，允许一个时间段内由多个进程并发访问。在一段时间内交替使用资源。

### 虚拟

是指把一个物理上的实体变为若干逻辑上的对应物。物理实体是实际存在的，而逻辑对应物是用户感受到的。

虚拟技术：

- 空分复用技术：利用存储器的空闲区域存放和运行其他程序，提高利用率。
- 时分复用技术：将一个大的时间段分为微小的时间间隔，多个进程在时间间隔内交替使用资源。

### 异步

在多道程序环境下，允许多个程序并发执行，但由于资源有限，进程的执行不是“一气呵成”的，进程运行的速度存在不确定性，这就是进程的异步性。

## 操作系统的运行机制

***



指令：处理器（CPU）能够识别、执行的最基本命令。

- 特权指令：不允许用户程序使用
- 非特权指令：

处理器的状态：用程序状态字寄存器（PSW）中的某个标志位来表示当前处理器处于什么状态，如0为用户态，1为核心态。

- 用户态：CPU只能执行非特权指令
- 核心态：特权指令、非特权指令都能执行

两种程序：

- 内核程序：操作系统的内核程序是系统的管理者，既可以执行特权指令，也可以执行非特权指令，运行在核心态。
- 应用程序：为了保证系统能安全运行，普通应用程序只能执行非特权指令，运行在用户态。

### 操作系统的层次结构

**内核**是计算机上配置的底层**软件**，是操作系统最基本、最核心的本部分，实现操作系统内核功能的那些程序就是**内核程序**。

![输入图片说明](https://foruda.gitee.com/images/1680417365877172655/d3350c87_8616658.png "屏幕截图")

![输入图片说明](https://foruda.gitee.com/images/1680417517758563849/f702770a_8616658.png "屏幕截图")

### 操作系统的体系结构

 ![输入图片说明](https://foruda.gitee.com/images/1680417663973660391/4e7157aa_8616658.png "屏幕截图")

## 中断和异常

***

中断的本质：发生中断意味着需要操作系统介入，开展管理工作。由于操作系统的管理工作（如进程切换、分配IO设备等）需要使用特权指令，因此CPU要从用户态转为和核心态。中断可以使CPU从用户态切换为核心态，使操作系统获得计算机的控制权。有了中断，才能实现多道程序的并发执行。

用户态切换到用户态的唯一途径时中断。

中断：

1. 当中断发生时，CPU进入和核心态
2. 当中断发生后，当前运行的进程暂停运行，并由操作系统堆中断进行处理
3. 堆与不同的中断信号，会进行不同的处理

中断分类：

- 内中断（异常、例外、陷入）：（信号来源于CPU内部，与当前执行的指令有关）
  - 自愿中断：指令中断（如，系统调用的访管指令，又叫陷入指令、trap指令）
  - 强迫中断
    - 硬件故障（如，缺页）
    - 软件中断（如，整数除0）
- 外中断（信号来源于CPU外部，与当前执行的指令无关）
  - 外设请求（如，IO操作完成发出的中断信号）
  - 人工干预

## 进程

***

进程实体（进程映像）：由程序段、数据段、PCB三部分组成

进程：时进程实体的运行过程，时系统进行资源分配和调度的一个独立单位。

### 进程状态

![输入图片说明](https://foruda.gitee.com/images/1680419210214685857/84f047e1_8616658.png "屏幕截图")

### 进程控制

进程控制的主要功能是对系统中的所有进程实施有效的管理，它具有创建新进程、撤销已有进程、实现进程状态转换的功能。

![输入图片说明](https://foruda.gitee.com/images/1680419844909390620/f36eee68_8616658.png "屏幕截图")

![输入图片说明](https://foruda.gitee.com/images/1680419886847805411/fbc610c1_8616658.png "屏幕截图")

![输入图片说明](https://foruda.gitee.com/images/1680419964986551467/0fb70dcc_8616658.png "屏幕截图")

![输入图片说明](https://foruda.gitee.com/images/1680419994264907345/dd185c09_8616658.png "屏幕截图")

### 进程通信

进程通信：就是进程之间的信息交换。

#### 1、共享存储

在内存中开辟一个内存空间，通过互斥的共享空间通信。

![输入图片说明](https://foruda.gitee.com/images/1680420214546865968/e2801157_8616658.png "屏幕截图")

#### 2、管道通信

管道：是指用于连接读写进程的一个共享文件，是内存空间中开辟的一个固定大小的缓冲区。管道采用半双工通信，如果需要实现双向通信，需要设置2个管道。

![输入图片说明](https://foruda.gitee.com/images/1680420494178212016/8d4f5b2d_8616658.png "屏幕截图")

#### 3、消息传递

进程间的数据交换以格式化的消息为单位，进程通过操作系统提供的“发送消息/接收消息”两个源于进行消息传递。

![输入图片说明](https://foruda.gitee.com/images/1680420616959021472/21447c37_8616658.png "屏幕截图")



## 处理机调度

***

调度：在多道程序系统中，从就绪队列中按照一定的算法选择一个进程并将处理机分配给它运行，实现进程的并发执行。

![输入图片说明](https://foruda.gitee.com/images/1680421271985304979/c6008035_8616658.png "屏幕截图")

### 调度算法